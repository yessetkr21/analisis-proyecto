{% extends "base.html" %}

{% block title %}Cap√≠tulo 1 - B√∫squeda de Ra√≠ces{% endblock %}

{% block header_title %}Cap√≠tulo 1: B√∫squeda de Ra√≠ces{% endblock %}
{% block header_subtitle %}M√©todos para encontrar ra√≠ces de funciones{% endblock %}

{% block content %}
<div class="metodos-container">
    <div class="metodos-sidebar">
        <h3>M√©todos Disponibles</h3>
        <button class="metodo-btn active" onclick="cambiarMetodo('biseccion')">Bisecci√≥n</button>
        <button class="metodo-btn" onclick="cambiarMetodo('regla-falsa')">Regla Falsa</button>
        <button class="metodo-btn" onclick="cambiarMetodo('punto-fijo')">Punto Fijo</button>
        <button class="metodo-btn" onclick="cambiarMetodo('newton')">Newton-Raphson</button>
        <button class="metodo-btn" onclick="cambiarMetodo('secante')">Secante</button>
        <button class="metodo-btn" onclick="cambiarMetodo('raices-multiples')">Ra√≠ces M√∫ltiples</button>
        <hr style="margin: 20px 0; border: 1px solid #e0e0e0;">
        <button class="metodo-btn" onclick="cambiarMetodo('informe')" style="background: #27ae60; color: white;">üìä Generar Informe</button>
    </div>

    <div class="metodo-content">
        <!-- Bisecci√≥n -->
        <div id="biseccion" class="metodo-panel active">
            <h2>M√©todo de Bisecci√≥n</h2>
            <div class="help-box">
                <h4>Ayuda</h4>
                <p>El m√©todo de bisecci√≥n encuentra ra√≠ces en un intervalo [Xi, Xs] donde f(Xi) y f(Xs) tienen signos opuestos.</p>
                <p><strong>Ejemplo:</strong> Para f(x) = x¬≥ - 2x - 5, usa Xi=2, Xs=3</p>
            </div>
            <form id="form-biseccion" onsubmit="event.preventDefault(); ejecutarMetodo('biseccion');">
                <div class="form-row">
                    <div class="form-group">
                        <label>Xi (l√≠mite inferior):</label>
                        <input type="number" step="any" name="xi" value="2" required>
                    </div>
                    <div class="form-group">
                        <label>Xs (l√≠mite superior):</label>
                        <input type="number" step="any" name="xs" value="3" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Tolerancia:</label>
                        <input type="text" name="tol" value="0.00001" required>
                        <small>Usa 5e-7 para error relativo, 0.00001 para absoluto</small>
                    </div>
                    <div class="form-group">
                        <label>Iteraciones m√°ximas:</label>
                        <input type="number" name="niter" value="100" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Funci√≥n f(x):</label>
                    <input type="text" name="funcion" value="x**3 - 2*x - 5" required>
                    <small>Ejemplos: x**2-4, sin(x)-x/2, exp(x)-3*x, log(x)+x-1</small>
                </div>
                <button type="submit" class="btn btn-primary">Ejecutar</button>
            </form>
            <div id="loading-biseccion" class="loading"><div class="spinner"></div></div>
            <div id="resultados-biseccion" class="results-section"></div>
        </div>

        <!-- Regla Falsa -->
        <div id="regla-falsa" class="metodo-panel">
            <h2>M√©todo de Regla Falsa</h2>
            <div class="help-box">
                <h4>Ayuda</h4>
                <p>Similar a bisecci√≥n, pero usa interpolaci√≥n lineal para aproximar mejor la ra√≠z.</p>
            </div>
            <form id="form-regla-falsa" onsubmit="event.preventDefault(); ejecutarMetodo('regla-falsa');">
                <div class="form-row">
                    <div class="form-group">
                        <label>Xi:</label>
                        <input type="number" step="any" name="xi" value="2" required>
                    </div>
                    <div class="form-group">
                        <label>Xs:</label>
                        <input type="number" step="any" name="xs" value="3" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Tolerancia:</label>
                        <input type="text" name="tol" value="0.00001" required>
                    </div>
                    <div class="form-group">
                        <label>Iteraciones m√°ximas:</label>
                        <input type="number" name="niter" value="100" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Funci√≥n f(x):</label>
                    <input type="text" name="funcion" value="x**3 - 2*x - 5" required>
                </div>
                <button type="submit" class="btn btn-primary">Ejecutar</button>
            </form>
            <div id="loading-regla-falsa" class="loading"><div class="spinner"></div></div>
            <div id="resultados-regla-falsa" class="results-section"></div>
        </div>

        <!-- Newton-Raphson -->
        <div id="newton" class="metodo-panel">
            <h2>M√©todo de Newton-Raphson</h2>
            <div class="help-box">
                <h4>Ayuda</h4>
                <p>Usa la derivada para converger r√°pidamente. Requiere un valor inicial cercano a la ra√≠z.</p>
                <p><strong>Nota:</strong> La derivada se calcula autom√°ticamente.</p>
            </div>
            <form id="form-newton" onsubmit="event.preventDefault(); ejecutarMetodo('newton');">
                <div class="form-row">
                    <div class="form-group">
                        <label>x0 (valor inicial):</label>
                        <input type="number" step="any" name="x0" value="2.5" required>
                    </div>
                    <div class="form-group">
                        <label>Tolerancia:</label>
                        <input type="text" name="tol" value="0.00001" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Iteraciones m√°ximas:</label>
                    <input type="number" name="niter" value="100" required>
                </div>
                <div class="form-group">
                    <label>Funci√≥n f(x):</label>
                    <input type="text" name="funcion" value="x**3 - 2*x - 5" required>
                </div>
                <button type="submit" class="btn btn-primary">Ejecutar</button>
            </form>
            <div id="loading-newton" class="loading"><div class="spinner"></div></div>
            <div id="resultados-newton" class="results-section"></div>
        </div>

        <!-- Panel de Informe Comparativo -->
        <div id="informe" class="metodo-panel">
            <h2>üìä Informe Comparativo de M√©todos</h2>
            <div class="help-box">
                <h4>¬øQu√© hace el informe?</h4>
                <p>Ejecuta TODOS los m√©todos del cap√≠tulo con los mismos par√°metros y compara:</p>
                <ul>
                    <li>N√∫mero de iteraciones</li>
                    <li>Error final alcanzado</li>
                    <li>Ra√≠z encontrada</li>
                    <li>Tiempo de ejecuci√≥n</li>
                </ul>
                <p><strong>Resultado:</strong> Identifica cu√°l m√©todo tuvo el mejor desempe√±o.</p>
            </div>

            <form id="form-informe">
                <div class="form-group">
                    <label>Funci√≥n f(x):</label>
                    <input type="text" name="funcion" value="x**3 - x - 2" required>
                    <small>Ejemplo: x**2 - 4, sin(x) - x/2, exp(x) - 2</small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Intervalo Xi (Bisecci√≥n/Regla Falsa):</label>
                        <input type="number" step="any" name="xi" value="1" required>
                    </div>
                    <div class="form-group">
                        <label>Intervalo Xs:</label>
                        <input type="number" step="any" name="xs" value="2" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>X0 inicial (Newton/Punto Fijo/Secante):</label>
                        <input type="number" step="any" name="x0" value="1.5" required>
                    </div>
                    <div class="form-group">
                        <label>X1 (Secante):</label>
                        <input type="number" step="any" name="x1" value="2" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Tolerancia:</label>
                        <input type="number" step="any" name="tol" value="1e-6" required>
                    </div>
                    <div class="form-group">
                        <label>Iteraciones m√°ximas:</label>
                        <input type="number" name="niter" value="100" required>
                    </div>
                </div>

                <button type="button" class="btn btn-success" onclick="generarInforme()">üöÄ Generar Informe Comparativo</button>
            </form>

            <div id="loading-informe" class="loading"><div class="spinner"></div></div>
            <div id="resultados-informe" class="results-section"></div>
        </div>

    </div>
</div>

<div id="grafica" class="chart-container"></div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/cap1.js') }}"></script>
{% endblock %}
