{% extends "base.html" %}

{% block title %}Cap√≠tulo 2 - Sistemas de Ecuaciones{% endblock %}

{% block header_title %}Cap√≠tulo 2: Sistemas de Ecuaciones Lineales{% endblock %}
{% block header_subtitle %}M√©todos iterativos: Jacobi, Gauss-Seidel y SOR{% endblock %}

{% block content %}
<div class="help-box">
    <h4>Formato de Entrada</h4>
    <p><strong>Matriz A:</strong> Separa filas con ";" y columnas con ",". Ejemplo: <code>10,1,1;2,10,1;2,2,10</code></p>
    <p><strong>Vector b:</strong> Separa elementos con ",". Ejemplo: <code>12,13,14</code></p>
    <p><strong>Vector x0:</strong> (Opcional) Vector inicial. Si no se proporciona, usa el vector cero.</p>
    <p><strong>‚ö†Ô∏è IMPORTANTE - Tolerancia:</strong> Solo son v√°lidos <code>5e-X</code> (Cifras Significativas) o <code>0.5e-X</code> (Decimales Correctos). Otros formatos como <code>1e-5</code> se tratar√°n como tolerancia gen√©rica.</p>
</div>

<div class="metodos-container">
    <div class="metodos-sidebar">
        <h3>M√©todos Disponibles</h3>
        <button class="metodo-btn active" onclick="cambiarMetodo('jacobi')">Jacobi</button>
        <button class="metodo-btn" onclick="cambiarMetodo('gauss-seidel')">Gauss-Seidel</button>
        <button class="metodo-btn" onclick="cambiarMetodo('sor')">SOR</button>
        <hr style="margin: 20px 0; border: 1px solid #e0e0e0;">
        <button class="metodo-btn" onclick="cambiarMetodo('informe-cap2')" style="background: #27ae60; color: white;">üìä Generar Informe</button>
    </div>

    <div class="metodo-content">
        <!-- Jacobi -->
        <div id="jacobi" class="metodo-panel active">
            <h2>M√©todo de Jacobi</h2>
            <form id="form-jacobi">
                <div class="form-group">
                    <label>Matriz A (coeficientes):</label>
                    <input type="text" name="matriz" value="10,1,1;2,10,1;2,2,10" required>
                    <small>Formato: fila1;fila2;fila3 (Ej: 10,1,1;2,10,1;2,2,10)</small>
                </div>
                <div class="form-group">
                    <label>Vector b:</label>
                    <input type="text" name="vector_b" value="12,13,14" required>
                    <small>Formato: b1,b2,b3 (Ej: 12,13,14)</small>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Vector inicial x0 (opcional):</label>
                        <input type="text" name="x0" placeholder="0,0,0">
                        <small>Dejar vac√≠o para usar vector cero</small>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Tolerancia:</label>
                        <input type="text" name="tol" placeholder="5e-7 o 0.5e-10" required>
                        <small>Ejemplos: 5e-7 (Cifras Sig.) o 0.5e-10 (Decimales Correctos)</small>
                    </div>
                    <div class="form-group">
                        <label>Iteraciones m√°ximas:</label>
                        <input type="number" name="niter" value="100" required>
                    </div>
                </div>
                <button type="button" class="btn btn-primary" onclick="ejecutarMetodo('jacobi')">Ejecutar</button>
            </form>
            <div id="loading-jacobi" class="loading"><div class="spinner"></div></div>
            <div id="resultados-jacobi" class="results-section"></div>
            <div id="grafica-jacobi" class="grafica-container"></div>
        </div>

        <!-- Gauss-Seidel -->
        <div id="gauss-seidel" class="metodo-panel">
            <h2>M√©todo de Gauss-Seidel</h2>
            <form id="form-gauss-seidel">
                <div class="form-group">
                    <label>Matriz A:</label>
                    <input type="text" name="matriz" value="10,1,1;2,10,1;2,2,10" required>
                </div>
                <div class="form-group">
                    <label>Vector b:</label>
                    <input type="text" name="vector_b" value="12,13,14" required>
                </div>
                <div class="form-group">
                    <label>Vector inicial x0 (opcional):</label>
                    <input type="text" name="x0" placeholder="0,0,0">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Tolerancia:</label>
                        <input type="text" name="tol" placeholder="5e-7 o 0.5e-10" required>
                        <small>Ejemplos: 5e-7 (Cifras Sig.) o 0.5e-10 (Decimales Correctos)</small>
                    </div>
                    <div class="form-group">
                        <label>Iteraciones m√°ximas:</label>
                        <input type="number" name="niter" value="100" required>
                    </div>
                </div>
                <button type="button" class="btn btn-primary" onclick="ejecutarMetodo('gauss-seidel')">Ejecutar</button>
            </form>
            <div id="loading-gauss-seidel" class="loading"><div class="spinner"></div></div>
            <div id="resultados-gauss-seidel" class="results-section"></div>
            <div id="grafica-gauss-seidel" class="grafica-container"></div>
        </div>

        <!-- SOR -->
        <div id="sor" class="metodo-panel">
            <h2>M√©todo SOR (Successive Over-Relaxation)</h2>
            <div class="help-box">
                <p><strong>Factor w:</strong> 0 < w < 2</p>
                <ul>
                    <li>w < 1: Subrelajaci√≥n</li>
                    <li>w = 1: Gauss-Seidel est√°ndar</li>
                    <li>w > 1: Sobrerelajaci√≥n (m√°s r√°pido)</li>
                </ul>
                <p>Valor recomendado: 1.5</p>
            </div>
            <form id="form-sor">
                <div class="form-group">
                    <label>Matriz A:</label>
                    <input type="text" name="matriz" value="10,1,1;2,10,1;2,2,10" required>
                </div>
                <div class="form-group">
                    <label>Vector b:</label>
                    <input type="text" name="vector_b" value="12,13,14" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Vector inicial x0 (opcional):</label>
                        <input type="text" name="x0" placeholder="0,0,0">
                    </div>
                    <div class="form-group">
                        <label>Factor de relajaci√≥n w:</label>
                        <input type="number" step="any" name="w" value="1.5" required>
                        <small>Debe estar entre 0 y 2</small>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Tolerancia:</label>
                        <input type="text" name="tol" placeholder="5e-7 o 0.5e-10" required>
                        <small>Ejemplos: 5e-7 (Cifras Sig.) o 0.5e-10 (Decimales Correctos)</small>
                    </div>
                    <div class="form-group">
                        <label>Iteraciones m√°ximas:</label>
                        <input type="number" name="niter" value="100" required>
                    </div>
                </div>
                <button type="button" class="btn btn-primary" onclick="ejecutarMetodo('sor')">Ejecutar</button>
            </form>
            <div id="loading-sor" class="loading"><div class="spinner"></div></div>
            <div id="resultados-sor" class="results-section"></div>
            <div id="grafica-sor" class="grafica-container"></div>
        </div>

        <!-- Panel de Informe Comparativo Cap 2 -->
        <div id="informe-cap2" class="metodo-panel">
            <h2>üìä Informe Comparativo de M√©todos</h2>
            <div class="help-box">
                <h4>¬øQu√© hace el informe?</h4>
                <p>Ejecuta los 3 m√©todos (Jacobi, Gauss-Seidel y SOR) con la misma matriz y compara:</p>
                <ul>
                    <li>N√∫mero de iteraciones hasta convergencia</li>
                    <li>Error final alcanzado</li>
                    <li>Radio espectral de cada m√©todo</li>
                    <li>Tiempo de ejecuci√≥n</li>
                </ul>
                <p><strong>Resultado:</strong> Identifica cu√°l m√©todo convergi√≥ m√°s r√°pido y con menor error.</p>
            </div>

            <form id="form-informe-cap2">
                <div class="form-group">
                    <label>Matriz A (coeficientes):</label>
                    <input type="text" name="matriz" value="10,1,1;2,10,1;2,2,10" required>
                    <small>Formato: fila1;fila2;fila3 - Ejemplo: 10,1,1;2,10,1;2,2,10</small>
                </div>

                <div class="form-group">
                    <label>Vector b (t√©rminos independientes):</label>
                    <input type="text" name="vector_b" value="12,13,14" required>
                    <small>Formato: b1,b2,b3 - Ejemplo: 12,13,14</small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Vector inicial x0 (opcional):</label>
                        <input type="text" name="x0" placeholder="0,0,0">
                        <small>Si vac√≠o, usa vector cero</small>
                    </div>
                    <div class="form-group">
                        <label>Factor w para SOR:</label>
                        <input type="number" step="any" name="w" value="1.5" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Tolerancia:</label>
                        <input type="text" name="tol" placeholder="5e-7 o 0.5e-10" required>
                        <small>Ejemplos: 5e-7 (Cifras Sig.) o 0.5e-10 (Decimales Correctos)</small>
                    </div>
                    <div class="form-group">
                        <label>Iteraciones m√°ximas:</label>
                        <input type="number" name="niter" value="100" required>
                    </div>
                </div>

                <button type="button" class="btn btn-success" onclick="generarInformeCap2()">üöÄ Generar Informe Comparativo</button>
            </form>

            <div id="loading-informe-cap2" class="loading"><div class="spinner"></div></div>
            <div id="resultados-informe-cap2" class="results-section"></div>
        </div>

    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/cap2.js') }}"></script>
{% endblock %}
